:mod:`avalanche.evaluation`
===========================

.. py:module:: avalanche.evaluation

.. autoapi-nested-parse::

   The :py:mod:`Evaluation` module provides tools and interfaces to easily define
   new metrics to monitor experiments. In addition, it also provides a set of
   already implemented metrics. These metrics can be used by passing them to
   the `EvaluationPlugin`.



Subpackages
-----------
.. toctree::
   :titlesonly:
   :maxdepth: 3

   metrics/index.rst


Submodules
----------
.. toctree::
   :titlesonly:
   :maxdepth: 1

   metric_definitions/index.rst
   metric_results/index.rst
   metric_utils/index.rst


Package Contents
----------------

Classes
~~~~~~~

.. autoapisummary::

   avalanche.evaluation.Metric
   avalanche.evaluation.PluginMetric



.. py:class:: Metric

   Bases: :class:`Protocol[TResult]`

   Definition of a standalone metric.

   A standalone metric exposes methods to reset its internal state and
   to emit a result. Emitting a result does not automatically cause
   a reset in the internal state.

   The specific metric implementation exposes ways to update the internal
   state. Usually, standalone metrics like :class:`Sum`, :class:`Mean`,
   :class:`Accuracy`, ... expose an `update` method.

   The `Metric` class can be used as a standalone metric by directly calling
   its methods.
   In order to automatically integrate the metric with the training and
   evaluation flows, you can use :class:`PluginMetric` class. The class
   receives events directly from the :class:`EvaluationPlugin` and can
   emits values on each callback. Usually, an instance of `Metric` is
   created within `PluginMetric`, which is then responsible for its
   update and results. See :class:`PluginMetric` for more details.

   .. method:: result(self) -> Optional[TResult]

      Obtains the value of the metric.

      :return: The value of the metric.


   .. method:: reset(self) -> None

      Resets the metric internal state.

      :return: None.



.. py:class:: PluginMetric

   Bases: :class:`Metric[TResult]`, :class:`StrategyCallbacks['MetricResult']`, :class:`abc.ABC`

   A metric that can be used together with :class:`EvaluationPlugin`.

   This class leaves the implementation of the `result` and `reset` methods
   to child classes while providing an empty implementation of the callbacks
   invoked by the :class:`EvaluationPlugin`. Subclasses should implement
   the `result`, `reset` and the desired callbacks to compute the specific
   metric.
   An instance of this class usually leverages a `Metric` instance to update,
   reset and emit metric results at appropriate times
   (during specific callbacks).

   This class also provides a utility method, `_next_x_position`, which can
   be used to progressively label each metric value with its appropriate "x"
   position in the plot.

   Creates an instance of a plugin metric.

   Child classes can safely invoke this (super) constructor as the first
   experience.

   .. method:: result(self) -> Optional[TResult]
      :abstractmethod:

      Obtains the value of the metric.

      :return: The value of the metric.


   .. method:: reset(self) -> None
      :abstractmethod:

      Resets the metric internal state.

      :return: None.


   .. method:: before_training(self, strategy: BaseStrategy) -> 'MetricResult'


   .. method:: before_training_exp(self, strategy: BaseStrategy) -> 'MetricResult'


   .. method:: adapt_train_dataset(self, strategy: BaseStrategy) -> 'MetricResult'


   .. method:: before_training_epoch(self, strategy: BaseStrategy) -> 'MetricResult'


   .. method:: before_training_iteration(self, strategy: BaseStrategy) -> 'MetricResult'


   .. method:: before_forward(self, strategy: BaseStrategy) -> 'MetricResult'


   .. method:: after_forward(self, strategy: BaseStrategy) -> 'MetricResult'


   .. method:: before_backward(self, strategy: BaseStrategy) -> 'MetricResult'


   .. method:: after_backward(self, strategy: BaseStrategy) -> 'MetricResult'


   .. method:: after_training_iteration(self, strategy: BaseStrategy) -> 'MetricResult'


   .. method:: before_update(self, strategy: BaseStrategy) -> 'MetricResult'


   .. method:: after_update(self, strategy: BaseStrategy) -> 'MetricResult'


   .. method:: after_training_epoch(self, strategy: BaseStrategy) -> 'MetricResult'


   .. method:: after_training_exp(self, strategy: BaseStrategy) -> 'MetricResult'


   .. method:: after_training(self, strategy: BaseStrategy) -> 'MetricResult'


   .. method:: before_eval(self, strategy: BaseStrategy) -> 'MetricResult'


   .. method:: adapt_eval_dataset(self, strategy: BaseStrategy) -> 'MetricResult'


   .. method:: before_eval_exp(self, strategy: BaseStrategy) -> 'MetricResult'


   .. method:: after_eval_exp(self, strategy: BaseStrategy) -> 'MetricResult'


   .. method:: after_eval(self, strategy: BaseStrategy) -> 'MetricResult'


   .. method:: before_eval_iteration(self, strategy: BaseStrategy) -> 'MetricResult'


   .. method:: before_eval_forward(self, strategy: BaseStrategy) -> 'MetricResult'


   .. method:: after_eval_forward(self, strategy: BaseStrategy) -> 'MetricResult'


   .. method:: after_eval_iteration(self, strategy: BaseStrategy) -> 'MetricResult'


   .. method:: _next_x_position(self, metric_name: str, initial_x: int = 0) -> int

      Utility method that can be used to get the next "x" position of a
      metric value (given its name).

      :param metric_name: The metric value name.
      :param initial_x: The initial "x" value. Defaults to 0.
      :return: The next "x" value to use.



